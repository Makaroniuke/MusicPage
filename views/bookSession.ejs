<% layout('layouts/boilerplate') %>

<div id="dates" data-dates="<%= JSON.stringify(lessons) %>">
<h2 >Book a lesson now</h2>

<div>
    <p>
        Book a lesson right now and learn from professionals. All classes start at 7 p.m. Let us know your experience 
        and preferences
    </p>
</div>

<form action="/lesson" method="post">
<div class="row">
    <div class="col-6 ">
        <div class="form-group">
        <label for="date">Date:</label>
        <input name="date" id="date" placeholder="Select Date..." class=date />
        </div>
    </div>
    <div class="col-4">
        <div class="form-group">
            <label for="preferences">Preferences (optional):</label>
            <textarea name="preferences" class="form-control" id="preferences" rows="5"></textarea>
          </div>
    </div>
</div>
<br/>
<br/>
<button type="submit">Submit</button>
</form>
</div>

<script>

    var lessons = JSON.parse(document.getElementById('dates').getAttribute('data-dates'));

    let dates = []
    function checkDate(){
        
        for(let i=0; i < lessons.length; i++){   
            
            dates.push( new Date(lessons[i].date).toISOString().substring(0, 10))
        }
        console.log(dates)

    }
    checkDate()
   
    var fp = flatpickr(".date", {
        inline: true,
        minDate: "today",
        maxDate: new Date().fp_incr(28), 
        disable: dates, 
        locale: {
            "firstDayOfWeek": 1 // start week on Monday
        }
    })


            
    //function(date) {
       
    // return true to disable
    //return (date.getDay() === 0 || date.getDay() === 6 );



  </script>